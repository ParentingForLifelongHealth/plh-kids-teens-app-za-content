{
  "flow_type": "template",
  "flow_name": "quiz_loop",
  "status": "released",
  "rows": [
    {
      "name": "article_id",
      "value": "test",
      "exclude_from_translation": true
    },
    {
      "name": "template_prefix",
      "value": "nested_",
      "exclude_from_translation": true
    },
    {
      "type": "begin_data_items",
      "name": "loop_quizes",
      "value": "@data.quizes",
      "parameter_list": "filter: @item.foreign_key == @local.article_id",
      "exclude_from_translation": true
    },
    {
      "type": "text",
      "name": "question",
      "value": "@item.question",
      "style_list": "margin-block: 0.5em",
      "parameter_list": "style: emphasised",
      "exclude_from_translation": true
    },
    {
      "name": "option_1_text",
      "value": "@item.option_1_text",
      "exclude_from_translation": true
    },
    {
      "name": "option_1_image",
      "value": "@item.option_1_image_asset",
      "exclude_from_translation": true
    },
    {
      "name": "feedback_1",
      "value": "@item.feedback_1",
      "exclude_from_translation": true
    },
    {
      "name": "option_2_text",
      "value": "@item.option_2_text",
      "exclude_from_translation": true
    },
    {
      "name": "option_2_image",
      "value": "@item.option_2_image_asset",
      "exclude_from_translation": true
    },
    {
      "name": "feedback_2",
      "value": "@item.feedback_2",
      "exclude_from_translation": true
    },
    {
      "name": "option_3_text",
      "value": "@item.option_3_text",
      "exclude_from_translation": true
    },
    {
      "name": "option_3_image",
      "value": "@item.option_3_image_asset",
      "exclude_from_translation": true
    },
    {
      "name": "feedback_3",
      "value": "@item.feedback_3",
      "exclude_from_translation": true
    },
    {
      "name": "option_4_text",
      "value": "@item.option_4_text",
      "exclude_from_translation": true
    },
    {
      "name": "option_4_image",
      "value": "@item.option_4_image_asset",
      "exclude_from_translation": true
    },
    {
      "name": "feedback_4",
      "value": "@item.feedback_4",
      "exclude_from_translation": true
    },
    {
      "name": "option_5_text",
      "value": "@item.option_5_text",
      "exclude_from_translation": true
    },
    {
      "name": "option_5_image",
      "value": "@item.option_5_image_asset",
      "exclude_from_translation": true
    },
    {
      "name": "feedback_5",
      "value": "@item.feedback_5",
      "exclude_from_translation": true
    },
    {
      "name": "option_6_text",
      "value": "@item.option_6_text",
      "exclude_from_translation": true
    },
    {
      "name": "option_6_image",
      "value": "@item.option_6_image_asset",
      "exclude_from_translation": true
    },
    {
      "name": "feedback_6",
      "value": "@item.feedback_6",
      "exclude_from_translation": true
    },
    {
      "exclude_from_translation": true
    },
    {
      "name": "answer_list_1",
      "value": "name:option_1 | text:@local.option_1_text; \nname:option_2 | text:@local.option_2_text;\nname:option_3 | text:@local.option_3_text;\nname:option_4 | text:@local.option_4_text;\nname:option_5 | text:@local.option_5_text;\nname:option_6 | text:@local.option_6_text",
      "exclude_from_translation": true
    },
    {
      "name": "answer_list_2",
      "value": "name:option_1 | text:@local.option_1_text | image: @local.option_1_image; \nname:option_2 | text:@local.option_2_text | image: @local.option_2_image;\nname:option_3 | text:@local.option_3_text | image: @local.option_3_image;\nname:option_4 | text:@local.option_4_text | image: @local.option_4_image;\nname:option_5 | text:@local.option_5_text | image: @local.option_5_image;\nname:option_6 | text:@local.option_6_text | image: @local.option_6_image",
      "exclude_from_translation": true
    },
    {
      "name": "has_any_image",
      "value": false,
      "exclude_from_translation": true
    },
    {
      "name": "has_any_image",
      "value": "!!@local.option_1_image || !!@local.option_2_image || !!@local.option_3_image || !!@local.option_4_image || !!@local.option_5_image || !!@local.option_6_image",
      "comments": "true if it contains an image"
    },
    {
      "name": "selection_tool",
      "exclude_from_translation": true
    },
    {
      "name": "placeholder",
      "value": "@global.combo_box_placeholder",
      "exclude_from_translation": true
    },
    {
      "type": "combo_box",
      "name": "selection_tool",
      "value": "@item.response_column",
      "action_list": "changed | set_item | response_column: this.value",
      "condition": "!@local.has_any_image",
      "parameter_list": "input_allowed: false; answer_list: @local.answer_list_1;\nplaceholder: @local.placeholder;",
      "exclude_from_translation": true
    },
    {
      "name": "radio_button_grid_item_width",
      "value": "90px",
      "exclude_from_translation": true
    },
    {
      "name": "radio_button_grid_width",
      "value": "100%",
      "exclude_from_translation": true
    },
    {
      "name": "radio_button_grid_gap",
      "value": "16px",
      "exclude_from_translation": true
    },
    {
      "type": "radio_button_grid",
      "name": "selection_tool",
      "value": "@item.response_column",
      "action_list": "changed | set_item | response_column: this.value",
      "condition": false,
      "parameter_list": "answer_list: @local.answer_list_2;\nitem_width: @local.radio_button_grid_item_width;\ngrid_width: @local.radio_button_grid_width;\ngrid_gap: @local.radio_button_grid_gap",
      "exclude_from_translation": true,
      "comments": "@local.has_any_image && @fields._deployment_name == \"plh_kids_tz\""
    },
    {
      "type": "radio_button_grid",
      "name": "selection_tool",
      "value": "@item.response_column",
      "action_list": "changed | set_item | response_column: this.value",
      "condition": "!!@local.has_any_image",
      "parameter_list": "answer_list: @local.answer_list_2;\nvariant: flex;\nstyle: secondary;\nitem_width: 96px;\ngrid_gap: 8px",
      "exclude_from_translation": true,
      "comments": "@local.has_any_image && @fields._deployment_name != \"plh_kids_tz\""
    },
    {
      "type": "begin_display_group",
      "name": "dg_feedback",
      "condition": "!!@item.response_column",
      "style_list": "margin-top: 0.5em",
      "exclude_from_translation": true
    },
    {
      "type": "begin_template",
      "name": "option_1",
      "value": "quiz_feedback",
      "condition": "@item.response_column==\"option_1\"",
      "exclude_from_translation": true
    },
    {
      "name": "feedback",
      "value": "@item.feedback_1"
    },
    {
      "name": "feedback_id",
      "value": "@item.feedback_1_id",
      "exclude_from_translation": true
    },
    {
      "name": "nested_prefix",
      "value": "@local.template_prefix",
      "exclude_from_translation": true
    },
    {
      "type": "end_template",
      "exclude_from_translation": true
    },
    {
      "type": "begin_template",
      "name": "option_2",
      "value": "quiz_feedback",
      "condition": "@item.response_column==\"option_2\"",
      "exclude_from_translation": true
    },
    {
      "name": "feedback",
      "value": "@item.feedback_2"
    },
    {
      "name": "feedback_id",
      "value": "@item.feedback_2_id",
      "exclude_from_translation": true
    },
    {
      "name": "nested_prefix",
      "value": "@local.template_prefix",
      "exclude_from_translation": true
    },
    {
      "type": "end_template",
      "exclude_from_translation": true
    },
    {
      "type": "begin_template",
      "name": "option_3",
      "value": "quiz_feedback",
      "condition": "@item.response_column==\"option_3\"",
      "exclude_from_translation": true
    },
    {
      "name": "feedback",
      "value": "@item.feedback_3"
    },
    {
      "name": "feedback_id",
      "value": "@item.feedback_3_id",
      "exclude_from_translation": true
    },
    {
      "name": "nested_prefix",
      "value": "@local.template_prefix",
      "exclude_from_translation": true
    },
    {
      "type": "end_template",
      "exclude_from_translation": true
    },
    {
      "type": "begin_template",
      "name": "option_4",
      "value": "quiz_feedback",
      "condition": "@item.response_column==\"option_4\"",
      "exclude_from_translation": true
    },
    {
      "name": "feedback",
      "value": "@item.feedback_4"
    },
    {
      "name": "feedback_id",
      "value": "@item.feedback_4_id",
      "exclude_from_translation": true
    },
    {
      "name": "nested_prefix",
      "value": "@local.template_prefix",
      "exclude_from_translation": true
    },
    {
      "type": "end_template",
      "exclude_from_translation": true
    },
    {
      "type": "begin_template",
      "name": "option_5",
      "value": "quiz_feedback",
      "condition": "@item.response_column==\"option_5\"",
      "exclude_from_translation": true
    },
    {
      "name": "feedback",
      "value": "@item.feedback_5"
    },
    {
      "name": "feedback_id",
      "value": "@item.feedback_5_id",
      "exclude_from_translation": true
    },
    {
      "name": "nested_prefix",
      "value": "@local.template_prefix",
      "exclude_from_translation": true
    },
    {
      "type": "end_template",
      "exclude_from_translation": true
    },
    {
      "type": "begin_template",
      "name": "option_6",
      "value": "quiz_feedback",
      "condition": "@item.response_column==\"option_6\"",
      "exclude_from_translation": true
    },
    {
      "name": "feedback",
      "value": "@item.feedback_6"
    },
    {
      "name": "feedback_id",
      "value": "@item.feedback_6_id",
      "exclude_from_translation": true
    },
    {
      "name": "nested_prefix",
      "value": "@local.template_prefix",
      "exclude_from_translation": true
    },
    {
      "type": "end_template",
      "exclude_from_translation": true
    },
    {
      "type": "end_display_group",
      "exclude_from_translation": true
    },
    {
      "type": "end_data_items"
    }
  ]
}