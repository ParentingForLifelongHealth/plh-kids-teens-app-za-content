{
  "flow_type": "template",
  "flow_name": "onboarding_settings",
  "status": "released",
  "rows": [
    {
      "name": "task_group",
      "value": "onboarding_settings_pages"
    },
    {
      "name": "page_count"
    },
    {
      "type": "data_items",
      "name": "compute_page_count",
      "value": "@data.onboarding_settings_pages",
      "action_list": "data_changed | set_local: page_count:  @items.length"
    },
    {
      "name": "completed_count"
    },
    {
      "type": "data_items",
      "name": "compute_completed_count",
      "value": "@data.onboarding_settings_pages",
      "action_list": "data_changed | set_local: completed_count:  @items.length",
      "parameter_list": "filter: @item.completed"
    },
    {
      "type": "text",
      "name": "debug_completed_count",
      "value": "Completed count: @local.completed_count",
      "condition": false,
      "exclude_from_translation": true
    },
    {
      "type": "begin_display_group",
      "name": "dg_top",
      "hidden": "@local.completed_count == @local.page_count"
    },
    {
      "type": "task_progress_bar",
      "parameter_list": "task_group_data: @local.task_group",
      "style_list": "flex: 1"
    },
    {
      "type": "end_display_group"
    },
    {
      "type": "begin_data_items",
      "name": "loop_pages",
      "value": "@data.onboarding_settings_pages"
    },
    {
      "type": "begin_display_group",
      "name": "await_data_loop_evaluation",
      "parameter_list": "style: column",
      "condition": "@local.completed_count !== undefined"
    },
    {
      "type": "begin_display_group",
      "name": "condition",
      "parameter_list": "style: column",
      "condition": "@item._index == @local.completed_count"
    },
    {
      "type": "begin_template",
      "name": "page",
      "value": "onboarding_settings_@item.id",
      "action_list": "completed | set_data |\n_list_id: onboarding_settings_pages,\n_id: @item.id,\ncompleted: true;\n\nuncompleted | set_data | \n_list_id: onboarding_settings_pages,\n_id: page_@local.completed_count,\ncompleted: false;"
    },
    {
      "type": "end_template"
    },
    {
      "type": "end_display_group"
    },
    {
      "type": "end_display_group"
    },
    {
      "type": "end_data_items"
    },
    {
      "type": "begin_display_group",
      "name": "page_finished",
      "parameter_list": "style: column",
      "hidden": "@local.completed_count != @local.page_count"
    },
    {
      "type": "lottie_animation",
      "name": "lottie",
      "value": "@global.onboarding_completed_lottie_asset",
      "condition": "!!@global.onboarding_completed_lottie_asset",
      "exclude_from_translation": true
    },
    {
      "type": "title",
      "name": "finish_profile_title",
      "value": "@global.onboarding_completed_title",
      "parameter_list": "variant: header"
    },
    {
      "type": "text",
      "name": "finish_profile_text",
      "value": "@global.onboarding_completed_text",
      "parameter_list": "text_align: center"
    },
    {
      "type": "begin_display_group",
      "name": "dg_footer",
      "parameter_list": "sticky: bottom;",
      "style_list": "padding: 12px 24px;"
    },
    {
      "type": "button",
      "name": "button_completed_3",
      "value": "@global.continue",
      "action_list": "click | emit: completed;\nclick | set_field: onboarding_settings_completed: true;",
      "parameter_list": "style: navigation;"
    },
    {
      "type": "end_display_group"
    },
    {
      "type": "end_display_group"
    }
  ]
}